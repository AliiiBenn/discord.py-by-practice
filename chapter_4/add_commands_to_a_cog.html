<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>add commands to a cog - Discord.py Exercices</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../chapter_1/events.html"><strong aria-hidden="true">2.</strong> Chapter 1 - Events</a></li><li class="chapter-item expanded "><a href="../chapter_2/commands.html"><strong aria-hidden="true">3.</strong> Chapter 2 - Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_2/without_arguments.html"><strong aria-hidden="true">3.1.</strong> without arguments</a></li><li class="chapter-item expanded "><a href="../chapter_2/unique_argument.html"><strong aria-hidden="true">3.2.</strong> unique argument</a></li><li class="chapter-item expanded "><a href="../chapter_2/multiple_arguments.html"><strong aria-hidden="true">3.3.</strong> multiple arguments</a></li><li class="chapter-item expanded "><a href="../chapter_2/string_arguments.html"><strong aria-hidden="true">3.4.</strong> string arguments</a></li><li class="chapter-item expanded "><a href="../chapter_2/commands_errors.html"><strong aria-hidden="true">3.5.</strong> commands errors</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_3/basic_converters.html"><strong aria-hidden="true">4.</strong> Chapter 3 - Bacic Converters</a></li><li class="chapter-item expanded "><a href="../chapter_4/cogs.html"><strong aria-hidden="true">5.</strong> Chapter 4 - Cogs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_4/add_commands_to_a_cog.html" class="active"><strong aria-hidden="true">5.1.</strong> add commands to a cog</a></li><li class="chapter-item expanded "><a href="../chapter_4/add_events_to_a_cog.html"><strong aria-hidden="true">5.2.</strong> add events to a cog</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_5/embeds.html"><strong aria-hidden="true">6.</strong> Chapter 5 - Embeds</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_5/create_an_embed.html"><strong aria-hidden="true">6.1.</strong> create an embed</a></li><li class="chapter-item expanded "><a href="../chapter_5/customize_an_embed.html"><strong aria-hidden="true">6.2.</strong> customize an embed</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_6/slash_commands.html"><strong aria-hidden="true">7.</strong> Chapter 6 - Slash Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_6/create_a_slash_command.html"><strong aria-hidden="true">7.1.</strong> create a slash command</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_7/hybrid_commands.html"><strong aria-hidden="true">8.</strong> Chapter 7 - Hybrid Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_7/create_a_hybrid_command.html"><strong aria-hidden="true">8.1.</strong> create a hybrid command</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_8/converters.html"><strong aria-hidden="true">9.</strong> Chapter 8 - Converters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_8/functions_converters.html"><strong aria-hidden="true">9.1.</strong> functions converters</a></li><li class="chapter-item expanded "><a href="../chapter_8/advanced_converters.html"><strong aria-hidden="true">9.2.</strong> advanced converters</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Discord.py Exercices</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="add-commands-to-a-cog"><a class="header" href="#add-commands-to-a-cog">add commands to a cog</a></h1>
<p>Nous avons vu dans le chapitre précédent comment créer un cog. Nous allons maintenant voir comment ajouter des commandes à ce cog. Nous allons créer un cog qui contient une commande <code>ping</code> qui ne prends pas d'arguments et qui renvoie <code>pong</code>.</p>
<pre><code class="language-python">import discord
from discord.ext import commands

class PingCog(commands.Cog):
    def __init__(self, bot : commands.Bot):
        self.bot = bot

    @commands.command()
    async def ping(self, ctx : commands.Context) -&gt; discord.Message:
        return await ctx.send(&quot;pong&quot;)

</code></pre>
<p>Nous pouvons donc voir que pour créer une nouvelle commande, nous devons utiliser la méthode <code>command</code> de la librairie <code>commands</code>. Cette méthode prend en paramètre optionnel le nom de la commande. La fonction qui est définie juste en dessous de cette méthode est la fonction qui sera appelée lorsque la commande sera exécutée. Cette fonction prend en paramètre le contexte de la commande et renvoie un message discord.</p>
<hr />
<h1 id="exercices"><a class="header" href="#exercices">Exercices</a></h1>
<h3 id="exercice-1"><a class="header" href="#exercice-1">Exercice 1</a></h3>
<p>Créez un cog <code>AddCog</code> qui contient une commande <code>add</code> qui prends deux arguments et qui renvoie la somme de ces deux arguments.</p>
<details>
<summary>Solution</summary>
<pre><code class="language-python">import discord
from discord.ext import commands

class AddCog(commands.Cog):
    def __init__(self, bot : commands.Bot):
        self.bot = bot

    @commands.command()
    async def add(self, ctx : commands.Context, a : int, b : int) -&gt; discord.Message:
        return await ctx.send(str(a + b))

</code></pre>
<p>On peut donc voir que pour créer une nouvelle commande, nous devons utiliser la méthode <code>command</code> de la librairie <code>commands</code>. La fonction définie en dessous de cette méthode prends quatre paramètres. Le premier paramètre est l'objet en lui même, le second paramètre est le contexte de la commande, les paramètres suivants sont les arguments de la commande. On peut voir que les arguments sont définis avec un type. Les types des arguments sont vérifiés automatiquement par la librairie <code>commands</code> et si un argument n'est pas du bon type, la commande ne sera pas exécutée et un message d'erreur sera envoyé dans la console.</p>
</details>
<h3 id="exercice-2"><a class="header" href="#exercice-2">Exercice 2</a></h3>
<p>Créer un Cog <code>MentionCog</code> qui contient une commande <code>mention_member_in_channel</code> qui prends en paramètre un membre et un salon et qui envoie un message dans ce salon en mentionnant le membre. Cette commande prends donc deux paramètres et doit avoir la structure suivante :</p>
<pre><code class="language-python">async def mention(self,
                  ctx : commands.Context, 
                  member : discord.Member, 
                  channel : discord.TextChannel) -&gt; discord.Message:
</code></pre>
<details>
<summary>Solution</summary>
<pre><code class="language-python">import discord
from discord.ext import commands

class MentionCog(commands.Cog):
    def __init__(self, bot : commands.Bot):
        self.bot = bot

    @commands.command()
    async def mention_member_in_channel(self, 
                                        ctx : commands.Context, 
                                        member : discord.Member, 
                                        channel : discord.TextChannel) -&gt; discord.Message:
        return await channel.send(member.mention)

</code></pre>
</details>
<h3 id="exercice-3"><a class="header" href="#exercice-3">Exercice 3</a></h3>
<p>Créer un Cog <code>MemberMuteCog</code> qui va contenir deux commandes, une commande <code>mute_member</code> qui prends en paramètre un membre et qui mute ce membre et une commande <code>unmute_member</code> qui prends en paramètre un membre et qui unmute ce membre.</p>
<p>Les deux commandes doivent avoir la structure suivante :</p>
<pre><code class="language-python">async def mute_member(self, 
                      ctx : commands.Context, 
                      member : discord.Member) -&gt; discord.Message:
</code></pre>
<pre><code class="language-python">async def unmute_member(self, 
                        ctx : commands.Context, 
                        member : discord.Member) -&gt; discord.Message:
</code></pre>
<details>
<summary>Solution</summary>
<pre><code class="language-python">import discord
from discord.ext import commands

class MemberMuteCog(commands.Cog):
    def __init__(self, bot : commands.Bot):
        self.bot = bot

    @commands.command()
    async def mute_member(self, 
                          ctx : commands.Context, 
                          member : discord.Member) -&gt; discord.Message:
        await member.edit(mute = True)
        return await ctx.send(f&quot;{member.mention} a été mute&quot;)

    @commands.command()
    async def unmute_member(self, 
                            ctx : commands.Context, 
                            member : discord.Member) -&gt; discord.Message:
        await member.edit(mute = False)
        return await ctx.send(f&quot;{member.mention} a été unmute&quot;)

</code></pre>
</details>
<h3 id="exercice-4"><a class="header" href="#exercice-4">Exercice 4</a></h3>
<p>Créer un Cog <code>MemberRoleHandlerCog</code> qui va contenir deux commandes, une commande <code>add_role_to_member</code> qui prends en paramètre un membre et un rôle et qui ajoute ce rôle au membre et une commande <code>remove_role_from_member</code> qui prends en paramètre un membre et un rôle et qui retire ce rôle au membre.</p>
<p>Les deux commandes doivent avoir la structure suivante :</p>
<pre><code class="language-python">async def add_role_to_member(self,
                             ctx : commands.Context,
                             member : discord.Member,
                             role : discord.Role) -&gt; discord.Message:
</code></pre>
<pre><code class="language-python">async def remove_role_from_member(self,
                             ctx : commands.Context,
                             member : discord.Member,
                             role : discord.Role) -&gt; discord.Message:
</code></pre>
<details>
<summary>Solution</summary>
<pre><code class="language-python">import discord
from discord.ext import commands

class MemberRoleHandlerCog(commands.Cog):
    def __init__(self, bot : commands.Bot):
        self.bot = bot

    @commands.command()
    async def add_role_to_member(self, 
                                 ctx : commands.Context, 
                                 member : discord.Member, 
                                 role : discord.Role) -&gt; discord.Message:
        await member.add_roles(role)
        return await ctx.send(f&quot;{role.mention} a été ajouté à {member.mention}&quot;)

    @commands.command()
    async def remove_role_from_member(self, 
                                      ctx : commands.Context, 
                                      member : discord.Member, 
                                      role : discord.Role) -&gt; discord.Message:
        await member.remove_roles(role)
        return await ctx.send(f&quot;{role.mention} a été retiré de {member.mention}&quot;)

</code></pre>
</details>
<br>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter_4/cogs.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../chapter_4/add_events_to_a_cog.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter_4/cogs.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../chapter_4/add_events_to_a_cog.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
